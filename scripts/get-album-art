#!/bin/bash

art_url=$(playerctl metadata mpris:artUrl 2>/dev/null || echo "")

if [[ $art_url == http* ]]; then
    art_path="/tmp/eww_album_art.jpg"
    wget -q "$art_url" -O "$art_path" 2>/dev/null
    if [ $? -eq 0 ]; then
        echo "$art_path"
    else
        echo ""
    fi
elif [[ $art_url == file://* ]]; then
    # Remove file:// prefix
    echo "${art_url#file://}"
else
    echo ""
fi